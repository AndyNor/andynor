{% extends "index.html" %}

{% block navigation_menu %}{% endblock%}
{% block search_bar %}{% endblock%}

{% block body_main %}

	{% block blog_content %}

	<a class="btn btn-small btn-primary" href="{% url 'app_conan' %}">Back to all items</a>

	<h2><a class="btn btn-small" href="/admin/conan/item/{{ item.pk }}/change/">✎ Edit item</a> {{ item }}</h2>
	A {{ item.itemtype }}. One item cost {{ item.itemprice }} silver.<br>
	It comes in stacks of {{ item.stacksize }} and one stack would cost {{ item.price }} silver.


	{% if calculation %}
		<h4>Total material breakdown</h4>
		{% for line in calculation %}
			<li>{{ line.amount }} {{ line.item }} ({{ line.price }} silver)</li>
		{% endfor %}
	{% endif %}

	<hr>
	<a class="btn btn-small" href="/admin/conan/recipe/add/?item={{ item.pk }}">Add recipe</a>

	{% for recipe in item.all_recipes.all %}
	<h4>
		<a href="/admin/conan/recipe/{{ recipe.pk }}/change/">Recipe #{{forloop.counter}}: Outputs {{ recipe.output_factor }} {{ recipe }}</a>
		<a href="/admin/conan/recipe/{{ recipe.pk }}/delete/"> (❌)</a>
	</h4>

	{% for part in recipe.all_recipe_parts.all %}
		<li>
			<a href="{% url 'item_details' part.item.pk %}">{{ part.amount }} {{ part.item }}</a> (<a href="/admin/conan/recipepart/{{ part.pk }}/change/">✎</a>)
		</li>
	{% endfor %}

		(<a href="/admin/conan/recipepart/add/?recipe={{recipe.pk}}">Add ingredient</a>)
		<hr>
	{% endfor %}

	{% endblock %}

{% endblock %}
